<%- include('partials/header') %>

<div class="row align-items-center mb-4">
    <div class="col-md-6">
        <h2>Shared Calendar</h2>
    </div>
    <div class="col-md-6">
        <form action="/calendar" method="GET" class="d-flex">
            <input type="text" name="search" class="form-control me-2" placeholder="Search event titles..." value="<%= searchTerm || '' %>">
            <button type="submit" class="btn btn-outline-secondary">Search</button>
            <% if(searchTerm) { %> <a href="/calendar" class="btn btn-link">Clear</a> <% } %>
        </form>
    </div>
</div>

<div class="row">
    <% if(events.length === 0) { %>
        <div class="col-12">
            <div class="card shadow-sm p-5 text-center text-muted">
                <h4>No matching events found</h4>
                <a href="/calendar" class="btn btn-sm btn-outline-primary mt-2">View All Events</a>
            </div>
        </div>
    <% } %>

    <% events.forEach(event => { %>
        <div class="col-md-4 mb-4">
            <div class="card shadow-sm h-100 border-start border-4 border-primary">
                <div class="card-body">
                    <h5 class="card-title fw-bold"><%= event.event_title %></h5>
                    <p class="card-text text-muted mb-2">
                        üìÖ <%= new Date(event.start_time).toLocaleDateString() %>
                    </p>
                    <p class="card-text">
                        ‚è∞ <%= new Date(event.start_time).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) %> 
                        - 
                        <%= new Date(event.end_time).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) %>
                    </p>
                </div>
            </div>
        </div>
    <% }) %>
</div>
<%- include('partials/footer') %>